<!DOCTYPE html>
<html dir="rtl" lang="ar">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: #f5f7fa;
            color: #333;
            direction: rtl;
        }
        
        .dashboard { max-width: 1400px; margin: 0 auto; padding: 20px; }
        
        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            border-radius: 15px;
            margin-bottom: 30px;
        }
        
        .header h1 { font-size: 32px; margin-bottom: 10px; }
        
        .tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }
        
        .tab-btn {
            padding: 12px 24px;
            background: white;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            cursor: pointer;
            font-size: 16px;
            font-weight: 600;
            transition: all 0.3s;
        }
        
        .tab-btn:hover { border-color: #667eea; color: #667eea; }
        .tab-btn.active { background: #667eea; color: white; border-color: #667eea; }
        
        .tab-content { display: none; }
        .tab-content.active { display: block; }
        
        .box {
            background: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.08);
        }
        
        .form-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px; }
        .form-group { margin-bottom: 20px; }
        .form-group label { display: block; margin-bottom: 8px; font-weight: 600; }
        .form-group input, .form-group textarea {
            width: 100%;
            padding: 12px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 14px;
            font-family: inherit;
        }
        
        .form-group input:focus, .form-group textarea:focus {
            outline: none;
            border-color: #667eea;
        }
        
        .form-group textarea { resize: vertical; min-height: 80px; }
        .form-group small { display: block; margin-top: 5px; color: #666; font-size: 12px; }
        
        .btn {
            padding: 12px 30px;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            margin-top: 20px;
            margin-left: 10px;
        }
        
        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }
        
        .btn-primary:hover { transform: translateY(-2px); box-shadow: 0 5px 15px rgba(102,126,234,0.4); }
        .btn-secondary { background: #6c757d; color: white; }
        
        .alert {
            padding: 15px 20px;
            border-radius: 8px;
            margin: 20px 0;
            display: none;
        }
        
        .alert-success { background: #d4edda; color: #155724; border: 1px solid #c3e6cb; }
        .alert-error { background: #f8d7da; color: #721c24; border: 1px solid #f5c6cb; }
        
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }
        
        th {
            background: #667eea;
            color: white;
            padding: 15px;
            text-align: right;
            font-weight: 600;
        }
        
        td {
            padding: 15px;
            border-bottom: 1px solid #e0e0e0;
            text-align: right;
        }
        
        tr:hover { background: #f5f7fa; }
        
        h2 { margin-bottom: 20px; }
        h3 { margin: 30px 0 20px 0; font-size: 18px; }
        
        .stat-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .stat-card {
            background: white;
            padding: 20px;
            border-radius: 10px;
            border-right: 4px solid #667eea;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }
        
        .stat-value { font-size: 36px; font-weight: bold; margin: 10px 0; }
        .stat-label { color: #666; font-size: 14px; }
        
        .info-box {
            background: #e7f3ff;
            border-right: 4px solid #2196F3;
            padding: 15px;
            border-radius: 5px;
            margin: 20px 0;
            color: #1565c0;
        }
        
        .loader { text-align: center; padding: 20px; }
        .loader-spinner {
            display: inline-block;
            width: 30px;
            height: 30px;
            border: 3px solid #f3f3f3;
            border-top: 3px solid #667eea;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <div class="dashboard">
        <div class="header">
            <h1>ğŸ¯ Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…</h1>
            <p>Ø¥Ø¯Ø§Ø±Ø© Ù†Ø¸Ø§Ù… Ø§Ù„Ø­Ø¬Ø² Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ</p>
        </div>
        
        <div class="info-box">
            â„¹ï¸ <strong>Ø§ØªØµØ§Ù„ Ø¨Ù€ Google Sheets:</strong> Ù‡Ø°Ù‡ Ø§Ù„Ù†Ø³Ø®Ø© Ù…ØªØµÙ„Ø© Ù…Ø¨Ø§Ø´Ø±Ø© Ø¨Ù…Ù„Ù Ø§Ù„Ø­Ø¬ÙˆØ²Ø§Øª Ù…Ù† Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†
        </div>
        
        <div class="tabs">
            <button class="tab-btn active" onclick="switchTab(0)">ğŸ“Š Ù†Ø¸Ø±Ø© Ø¹Ø§Ù…Ø©</button>
            <button class="tab-btn" onclick="switchTab(1)">âš™ï¸ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª</button>
            <button class="tab-btn" onclick="switchTab(2)">ğŸ“… Ø§Ù„Ø­Ø¬ÙˆØ²Ø§Øª Ø§Ù„Ø­ÙŠØ©</button>
            <button class="tab-btn" onclick="switchTab(3)">ğŸ¨ Ø§Ù„Ù…Ø¸Ù‡Ø±</button>
        </div>
        
        <!-- TAB 0: Ù†Ø¸Ø±Ø© Ø¹Ø§Ù…Ø© -->
        <div id="tab-0" class="tab-content active">
            <div class="box">
                <h2>ğŸ“Š Ù†Ø¸Ø±Ø© Ø¹Ø§Ù…Ø©</h2>
                
                <div class="stat-grid">
                    <div class="stat-card">
                        <div class="stat-label">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø­Ø¬ÙˆØ²Ø§Øª</div>
                        <div class="stat-value" id="total">0</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-label">Ø­Ø¬ÙˆØ²Ø§Øª Ø§Ù„ÙŠÙˆÙ…</div>
                        <div class="stat-value" id="today">0</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-label">Ø­Ø¬ÙˆØ²Ø§Øª Ù‡Ø°Ø§ Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹</div>
                        <div class="stat-value" id="week">0</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-label">Ø­Ø¬ÙˆØ²Ø§Øª Ù‡Ø°Ø§ Ø§Ù„Ø´Ù‡Ø±</div>
                        <div class="stat-value" id="month">0</div>
                    </div>
                </div>
                
                <h3>Ø¢Ø®Ø± Ø§Ù„Ø­Ø¬ÙˆØ²Ø§Øª Ù…Ù† Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†</h3>
                <button class="btn btn-secondary" onclick="refreshData()">ğŸ”„ ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¢Ù†</button>
                
                <table>
                    <thead>
                        <tr>
                            <th>ØªØ§Ø±ÙŠØ® Ø§Ù„Ø­Ø¬Ø²</th>
                            <th>Ø§Ù„Ø§Ø³Ù…</th>
                            <th>Ø§Ù„Ù‡Ø§ØªÙ</th>
                            <th>Ø§Ù„Ù…ÙˆØ¹Ø¯</th>
                            <th>Ø§Ù„Ø­Ø§Ù„Ø©</th>
                            <th>Ù…Ù„Ø§Ø­Ø¸Ø§Øª</th>
                        </tr>
                    </thead>
                    <tbody id="recent-bookings">
                        <tr><td colspan="6" class="loader"><div class="loader-spinner"></div></td></tr>
                    </tbody>
                </table>
            </div>
        </div>
        
        <!-- TAB 1: Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª -->
        <div id="tab-1" class="tab-content">
            <div class="box">
                <h2>âš™ï¸ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù†Ø¸Ø§Ù…</h2>
                
                <div class="info-box">
                    ğŸ“Œ Ø£Ø¯Ø®Ù„ Ø±Ø§Ø¨Ø· Google Apps Script Ø§Ù„Ø®Ø§Øµ Ø¨Ùƒ Ø£Ø¯Ù†Ø§Ù‡
                </div>
                
                <div class="form-group">
                    <label>https://script.google.com/macros/s/AKfycbz05cIS5HZpKEE33XU_0NoP3eN6zZ6LHAyx7fS_iiTPMavxlYF-WREFL0gFhoYuOTSs/exec</label>
                    <input type="url" id="scriptUrl" placeholder="https://script.google.com/macros/s/AKfycbz05cIS5HZpKEE33XU_0NoP3eN6zZ6LHAyx7fS_iiTPMavxlYF-WREFL0gFhoYuOTSs/exec">
                    <small>Ù‡Ø°Ø§ Ø§Ù„Ø±Ø§Ø¨Ø· ÙŠØ±Ø¨Ø·Ùƒ Ø¨Ø¨ÙŠØ§Ù†Ø§Øª Google Sheets</small>
                </div>
                
                <form id="settingsForm">
                    <div class="form-grid">
                        <div class="form-group">
                            <label>Ø§Ø³Ù… Ø§Ù„Ù…ÙƒØ§Ù†</label>
                            <input type="text" id="setting_Ø§Ø³Ù… Ø§Ù„Ù…ÙƒØ§Ù†" value="Ø¹ÙŠØ§Ø¯Ø© Ø¯. Ù…ØµØ·ÙÙ‰">
                        </div>
                        <div class="form-group">
                            <label>Ø±Ù‚Ù… Ø§Ù„ÙˆØ§ØªØ³Ø§Ø¨</label>
                            <input type="text" id="setting_Ø±Ù‚Ù… Ø§Ù„ÙˆØ§ØªØ³Ø§Ø¨" placeholder="966501234567">
                        </div>
                        <div class="form-group">
                            <label>Ø±Ø§Ø¨Ø· Ø§Ù„Ø´Ø¹Ø§Ø±</label>
                            <input type="url" id="setting_Ø±Ø§Ø¨Ø· Ø§Ù„Ø´Ø¹Ø§Ø±">
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label>Ù†Ø¨Ø°Ø© Ù…Ø®ØªØµØ±Ø©</label>
                        <textarea id="setting_Ù†Ø¨Ø°Ø© Ù…Ø®ØªØµØ±Ø©">Ù†Ù‚Ø¯Ù… Ø£ÙØ¶Ù„ Ø§Ù„Ø®Ø¯Ù…Ø§Øª Ø§Ù„Ø·Ø¨ÙŠØ©</textarea>
                    </div>
                    
                    <div class="form-group">
                        <label>Ø±Ø³Ø§Ù„Ø© Ø§Ù„ØªØ±Ø­ÙŠØ¨</label>
                        <textarea id="setting_Ø±Ø³Ø§Ù„Ø© Ø§Ù„ØªØ±Ø­ÙŠØ¨">Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ùƒ ÙÙŠ Ù†Ø¸Ø§Ù… Ø§Ù„Ø­Ø¬Ø²</textarea>
                    </div>
                    
                    <h3>Ø£ÙˆÙ‚Ø§Øª Ø§Ù„Ø¹Ù…Ù„</h3>
                    <div class="form-grid">
                        <div class="form-group">
                            <label>Ø£ÙŠØ§Ù… Ø§Ù„Ø¹Ù…Ù„</label>
                            <input type="text" id="setting_Ø£ÙŠØ§Ù… Ø§Ù„Ø¹Ù…Ù„" value="0,2,5">
                        </div>
                        <div class="form-group">
                            <label>Ø³Ø§Ø¹Ø© Ø§Ù„Ø¨Ø¯Ø§ÙŠØ©</label>
                            <input type="number" id="setting_Ø³Ø§Ø¹Ø© Ø§Ù„Ø¨Ø¯Ø§ÙŠØ©" min="0" max="23" value="14">
                        </div>
                        <div class="form-group">
                            <label>Ø³Ø§Ø¹Ø© Ø§Ù„Ù†Ù‡Ø§ÙŠØ©</label>
                            <input type="number" id="setting_Ø³Ø§Ø¹Ø© Ø§Ù„Ù†Ù‡Ø§ÙŠØ©" min="0" max="24" value="24">
                        </div>
                        <div class="form-group">
                            <label>Ù…Ø¯Ø© Ø§Ù„Ù…ÙˆØ¹Ø¯ (Ø¯Ù‚ÙŠÙ‚Ø©)</label>
                            <input type="number" id="setting_Ù…Ø¯Ø© Ø§Ù„Ù…ÙˆØ¹Ø¯" min="15" step="15" value="60">
                        </div>
                    </div>
                    
                    <div class="alert" id="alert-settings"></div>
                    <button type="submit" class="btn btn-primary">ğŸ’¾ Ø­ÙØ¸ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª</button>
                </form>
            </div>
        </div>
        
        <!-- TAB 2: Ø§Ù„Ø­Ø¬ÙˆØ²Ø§Øª Ø§Ù„Ø­ÙŠØ© -->
        <div id="tab-2" class="tab-content">
            <div class="box">
                <h2>ğŸ“… Ø§Ù„Ø­Ø¬ÙˆØ²Ø§Øª Ø§Ù„Ø­ÙŠØ© Ù…Ù† Google Sheets</h2>
                <button class="btn btn-secondary" onclick="refreshData()">ğŸ”„ ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¢Ù†</button>
                
                <table>
                    <thead>
                        <tr>
                            <th>ØªØ§Ø±ÙŠØ® Ø§Ù„Ø­Ø¬Ø²</th>
                            <th>Ø§Ù„Ø§Ø³Ù…</th>
                            <th>Ø§Ù„Ù‡Ø§ØªÙ</th>
                            <th>Ø§Ù„Ù…ÙˆØ¹Ø¯</th>
                            <th>Ø§Ù„Ø­Ø§Ù„Ø©</th>
                            <th>Ù…Ù„Ø§Ø­Ø¸Ø§Øª</th>
                        </tr>
                    </thead>
                    <tbody id="all-bookings">
                        <tr><td colspan="6" class="loader"><div class="loader-spinner"></div></td></tr>
                    </tbody>
                </table>
            </div>
        </div>
        
        <!-- TAB 3: Ø§Ù„Ù…Ø¸Ù‡Ø± -->
        <div id="tab-3" class="tab-content">
            <div class="box">
                <h2>ğŸ¨ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù…Ø¸Ù‡Ø±</h2>
                <form id="appearanceForm">
                    <div class="form-grid">
                        <div class="form-group">
                            <label>Ø§Ù„Ù„ÙˆÙ† Ø§Ù„Ø£Ø³Ø§Ø³ÙŠ</label>
                            <input type="color" id="setting_Ù„ÙˆÙ† Ø§Ù„Ø³Ù…Ø© Ø§Ù„Ø£Ø³Ø§Ø³ÙŠ" value="#007bff">
                        </div>
                        <div class="form-group">
                            <label>Ø§Ù„Ù„ÙˆÙ† Ø§Ù„Ø«Ø§Ù†ÙˆÙŠ</label>
                            <input type="color" id="setting_Ù„ÙˆÙ† Ø§Ù„Ø³Ù…Ø© Ø§Ù„Ø«Ø§Ù†ÙˆÙŠ" value="#6c757d">
                        </div>
                    </div>
                    <div class="alert" id="alert-appearance"></div>
                    <button type="submit" class="btn btn-primary">ğŸ’¾ Ø­ÙØ¸</button>
                </form>
            </div>
        </div>
    </div>

    <script>
        const SETTINGS_KEY = 'appointmentSettings';
        const SCRIPT_URL_KEY = 'googleAppsScriptUrl';
        
        // Ø­ÙØ¸ ÙˆØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ù…Ø­Ù„ÙŠØ§Ù‹
        function loadSettings() {
            const saved = localStorage.getItem(SETTINGS_KEY);
            if (saved) {
                const settings = JSON.parse(saved);
                for (const key in settings) {
                    const input = document.getElementById('setting_' + key);
                    if (input) {
                        input.value = settings[key];
                    }
                }
            }
            
            const scriptUrl = localStorage.getItem(SCRIPT_URL_KEY);
            if (scriptUrl) {
                document.getElementById('scriptUrl').value = scriptUrl;
            }
        }
        
        function saveSettings() {
            const scriptUrl = document.getElementById('scriptUrl').value;
            if (scriptUrl) {
                localStorage.setItem(SCRIPT_URL_KEY, scriptUrl);
            }
            
            const settings = {};
            const keys = ['Ø§Ø³Ù… Ø§Ù„Ù…ÙƒØ§Ù†', 'Ø±Ù‚Ù… Ø§Ù„ÙˆØ§ØªØ³Ø§Ø¨', 'Ø±Ø§Ø¨Ø· Ø§Ù„Ø´Ø¹Ø§Ø±', 'Ù†Ø¨Ø°Ø© Ù…Ø®ØªØµØ±Ø©', 'Ø±Ø³Ø§Ù„Ø© Ø§Ù„ØªØ±Ø­ÙŠØ¨', 'Ø£ÙŠØ§Ù… Ø§Ù„Ø¹Ù…Ù„', 'Ø³Ø§Ø¹Ø© Ø§Ù„Ø¨Ø¯Ø§ÙŠØ©', 'Ø³Ø§Ø¹Ø© Ø§Ù„Ù†Ù‡Ø§ÙŠØ©', 'Ù…Ø¯Ø© Ø§Ù„Ù…ÙˆØ¹Ø¯', 'Ù„ÙˆÙ† Ø§Ù„Ø³Ù…Ø© Ø§Ù„Ø£Ø³Ø§Ø³ÙŠ', 'Ù„ÙˆÙ† Ø§Ù„Ø³Ù…Ø© Ø§Ù„Ø«Ø§Ù†ÙˆÙŠ'];
            
            keys.forEach(key => {
                const input = document.getElementById('setting_' + key);
                if (input) settings[key] = input.value;
            });
            
            localStorage.setItem(SETTINGS_KEY, JSON.stringify(settings));
            
            const alert = document.getElementById('alert-settings');
            alert.textContent = 'âœ… ØªÙ… Ø­ÙØ¸ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª!';
            alert.className = 'alert alert-success';
            alert.style.display = 'block';
            
            setTimeout(() => { alert.style.display = 'none'; }, 3000);
        }
        
        // Ø¬Ù„Ø¨ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ù† Google Sheets
        function refreshData() {
            const scriptUrl = localStorage.getItem(SCRIPT_URL_KEY);
            if (!scriptUrl) {
                alert('ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø±Ø§Ø¨Ø· Google Apps Script Ø£ÙˆÙ„Ø§Ù‹ Ù…Ù† ØªØ¨ÙˆÙŠØ¨ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª');
                switchTab(1);
                return;
            }
            
            loadStats();
            loadRecent();
            loadAllBookings();
        }
        
        function loadStats() {
            const scriptUrl = localStorage.getItem(SCRIPT_URL_KEY);
            if (!scriptUrl) return;
            
            fetch(scriptUrl + '?action=getStats')
                .then(r => r.json())
                .then(stats => {
                    document.getElementById('total').textContent = stats.total || 0;
                    document.getElementById('today').textContent = stats.today || 0;
                    document.getElementById('week').textContent = stats.thisWeek || 0;
                    document.getElementById('month').textContent = stats.thisMonth || 0;
                })
                .catch(e => console.log('Ø®Ø·Ø£ ÙÙŠ Ø¬Ù„Ø¨ Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª:', e));
        }
        
        function loadRecent() {
            const scriptUrl = localStorage.getItem(SCRIPT_URL_KEY);
            if (!scriptUrl) return;
            
            fetch(scriptUrl + '?action=getRecentBookings&limit=10')
                .then(r => r.json())
                .then(bookings => {
                    const tbody = document.getElementById('recent-bookings');
                    if (!bookings || bookings.length === 0) {
                        tbody.innerHTML = '<tr><td colspan="6">Ù„Ø§ ØªÙˆØ¬Ø¯ Ø­Ø¬ÙˆØ²Ø§Øª</td></tr>';
                        return;
                    }
                    
                    let html = '';
                    bookings.forEach(b => {
                        const bd = new Date(b.bookingDate).toLocaleString('ar-EG');
                        const ad = new Date(b.appointmentTime).toLocaleString('ar-EG');
                        html += `<tr><td>${bd}</td><td>${b.name}</td><td>${b.phone}</td><td>${ad}</td><td>${b.status}</td><td>${b.notes || '-'}</td></tr>`;
                    });
                    tbody.innerHTML = html;
                })
                .catch(e => {
                    console.log('Ø®Ø·Ø£:', e);
                    document.getElementById('recent-bookings').innerHTML = '<tr><td colspan="6">Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„</td></tr>';
                });
        }
        
        function loadAllBookings() {
            const scriptUrl = localStorage.getItem(SCRIPT_URL_KEY);
            if (!scriptUrl) return;
            
            fetch(scriptUrl + '?action=getAllBookings')
                .then(r => r.json())
                .then(bookings => {
                    const tbody = document.getElementById('all-bookings');
                    if (!bookings || bookings.length === 0) {
                        tbody.innerHTML = '<tr><td colspan="6">Ù„Ø§ ØªÙˆØ¬Ø¯ Ø­Ø¬ÙˆØ²Ø§Øª</td></tr>';
                        return;
                    }
                    
                    let html = '';
                    bookings.forEach(b => {
                        const bd = new Date(b.bookingDate).toLocaleString('ar-EG');
                        const ad = new Date(b.appointmentTime).toLocaleString('ar-EG');
                        html += `<tr><td>${bd}</td><td>${b.name}</td><td>${b.phone}</td><td>${ad}</td><td>${b.status}</td><td>${b.notes || '-'}</td></tr>`;
                    });
                    tbody.innerHTML = html;
                })
                .catch(e => {
                    console.log('Ø®Ø·Ø£:', e);
                    document.getElementById('all-bookings').innerHTML = '<tr><td colspan="6">Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„</td></tr>';
                });
        }
        
        function switchTab(tabIndex) {
            const tabs = document.querySelectorAll('.tab-content');
            tabs.forEach(tab => tab.classList.remove('active'));
            
            const buttons = document.querySelectorAll('.tab-btn');
            buttons.forEach(btn => btn.classList.remove('active'));
            
            document.getElementById('tab-' + tabIndex).classList.add('active');
            buttons[tabIndex].classList.add('active');
            
            if (tabIndex === 0) {
                refreshData();
            } else if (tabIndex === 1) {
                loadSettings();
            } else if (tabIndex === 2) {
                loadAllBookings();
            }
        }
        
        document.getElementById('settingsForm').addEventListener('submit', e => {
            e.preventDefault();
            saveSettings();
        });
        
        document.getElementById('appearanceForm').addEventListener('submit', e => {
            e.preventDefault();
            saveSettings();
            
            const alert = document.getElementById('alert-appearance');
            alert.textContent = 'âœ… ØªÙ… Ø§Ù„ØªØ­Ø¯ÙŠØ«!';
            alert.className = 'alert alert-success';
            alert.style.display = 'block';
            
            setTimeout(() => { alert.style.display = 'none'; }, 3000);
        });
        
        window.addEventListener('load', loadSettings);
    </script>
</body>
</html>
