<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù…Ø­Ø±Ø± Ø§Ù„Ø¥Ø·Ø§Ø± Ø§Ù„Ù…Ø®ØµØµ</title>
    <style>
        * {margin: 0;padding: 0;box-sizing: border-box;}
        body {font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);min-height: 100vh;padding: 20px;}
        .container {background: white;border-radius: 20px;box-shadow: 0 20px 60px rgba(0,0,0,0.3);max-width: 1000px;width: 100%;margin: 0 auto;padding: 40px;}
        h1 {color: #2d3748;text-align: center;margin-bottom: 10px;font-size: 2.5em;}
        .subtitle {text-align: center;color: #667eea;margin-bottom: 40px;font-size: 1.1em;}
        .upload-section {text-align: center;margin-bottom: 30px;}
        .upload-box {border: 3px dashed #667eea;border-radius: 15px;padding: 40px;text-align: center;cursor: pointer;transition: all 0.3s;background: #f8f9fa;display: inline-block;min-width: 400px;}
        .upload-box:hover {background: #e9ecef;border-color: #764ba2;transform: translateY(-2px);}
        .upload-box.dragover {background: #dee2e6;border-color: #764ba2;}
        .upload-box.uploaded {border-color: #28a745;background: #d4edda;}
        .upload-icon {font-size: 4em;margin-bottom: 15px;}
        .upload-box h3 {color: #495057;margin-bottom: 10px;font-size: 1.5em;}
        .upload-box p {color: #6c757d;font-size: 1em;}
        input[type="file"] {display: none;}
        .editor-section {display: none;margin-top: 30px;}
        .editor-section.active {display: block;}
        .preview-container {position: relative;max-width: 600px;margin: 0 auto 30px;background: #f0f0f0;border-radius: 50%;overflow: hidden;aspect-ratio: 1;}
        #editorCanvas {display: block;width: 100%;height: 100%;cursor: move;touch-action: none;}
        .controls {background: #f8f9fa;padding: 25px;border-radius: 15px;margin-bottom: 20px;}
        .control-group {margin-bottom: 20px;}
        .control-group label {display: block;margin-bottom: 10px;color: #2d3748;font-weight: 600;font-size: 1.1em;}
        .control-row {display: flex;align-items: center;gap: 15px;}
        input[type="range"] {flex: 1;height: 8px;border-radius: 5px;background: #dee2e6;outline: none;-webkit-appearance: none;}
        input[type="range"]::-webkit-slider-thumb {-webkit-appearance: none;appearance: none;width: 20px;height: 20px;border-radius: 50%;background: #667eea;cursor: pointer;}
        input[type="range"]::-moz-range-thumb {width: 20px;height: 20px;border-radius: 50%;background: #667eea;cursor: pointer;border: none;}
        .value-display {min-width: 60px;text-align: center;font-weight: 600;color: #667eea;font-size: 1.1em;}
        .btn {background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);color: white;border: none;padding: 15px 40px;border-radius: 50px;font-size: 1.1em;cursor: pointer;transition: transform 0.2s;margin: 10px;font-weight: 600;}
        .btn:hover {transform: translateY(-2px);box-shadow: 0 10px 20px rgba(102, 126, 234, 0.4);}
        .btn-secondary {background: linear-gradient(135deg, #6c757d 0%, #495057 100%);}
        .buttons {text-align: center;margin-top: 20px;}
        .info {background: #e7f3ff;border-right: 4px solid #667eea;padding: 20px;border-radius: 10px;margin-top: 20px;color: #2d3748;}
        .info h4 {margin-bottom: 10px;color: #667eea;}
        .info ul {margin-right: 20px;line-height: 1.8;}
        @media (max-width: 768px) {.container {padding: 20px;}h1 {font-size: 1.8em;}.upload-box {min-width: 100%;}.preview-container {max-width: 100%;}}
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ¨ Ù…Ø­Ø±Ø± Ø§Ù„Ø¥Ø·Ø§Ø± Ø§Ù„Ù…Ø®ØµØµ</h1>
        <div class="subtitle">Ø§Ø±ÙØ¹ ØµÙˆØ±ØªÙƒ ÙˆØ§Ø¶Ø¨Ø· Ù…ÙˆØ¶Ø¹Ù‡Ø§ Ù„Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø¨Ø±ÙˆÙØ§ÙŠÙ„ Ø§Ø­ØªØ±Ø§ÙÙŠ</div>
        <div class="upload-section" id="uploadSection">
            <div class="upload-box" id="uploadArea">
                <div class="upload-icon">ğŸ“·</div>
                <h3>Ø§Ø±ÙØ¹ ØµÙˆØ±ØªÙƒ Ø§Ù„Ø´Ø®ØµÙŠØ©</h3>
                <p>Ø§Ø¶ØºØ· Ù‡Ù†Ø§ Ø£Ùˆ Ø§Ø³Ø­Ø¨ ØµÙˆØ±ØªÙƒ</p>
                <input type="file" id="fileInput" accept="image/*">
            </div>
        </div>
        <div class="editor-section" id="editorSection">
            <div class="preview-container"><canvas id="editorCanvas"></canvas></div>
            <div class="controls">
                <div class="control-group"><label>ğŸ” Ø­Ø¬Ù… Ø§Ù„ØµÙˆØ±Ø©</label><div class="control-row"><input type="range" id="scaleSlider" min="50" max="200" value="100" step="1"><span class="value-display" id="scaleValue">100%</span></div></div>
                <div class="control-group"><label>â†”ï¸ Ù…ÙˆØ¶Ø¹ Ø£ÙÙ‚ÙŠ</label><div class="control-row"><input type="range" id="xSlider" min="-200" max="200" value="0" step="1"><span class="value-display" id="xValue">0</span></div></div>
                <div class="control-group"><label>â†•ï¸ Ù…ÙˆØ¶Ø¹ Ø¹Ù…ÙˆØ¯ÙŠ</label><div class="control-row"><input type="range" id="ySlider" min="-200" max="200" value="0" step="1"><span class="value-display" id="yValue">0</span></div></div>
                <div class="control-group"><label>ğŸ”„ Ø¯ÙˆØ±Ø§Ù†</label><div class="control-row"><input type="range" id="rotationSlider" min="-180" max="180" value="0" step="1"><span class="value-display" id="rotationValue">0Â°</span></div></div>
            </div>
            <div class="buttons">
                <button class="btn" onclick="downloadImage()">ğŸ’¾ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙˆØ±Ø©</button>
                <button class="btn" onclick="shareImage()">ğŸ“¤ Ù…Ø´Ø§Ø±ÙƒØ©</button>
                <button class="btn btn-secondary" onclick="reset()">ğŸ”„ Ø±ÙØ¹ ØµÙˆØ±Ø© Ø¬Ø¯ÙŠØ¯Ø©</button>
            </div>
        </div>
        <div class="info">
            <h4>ğŸ“ ÙƒÙŠÙ ØªØ³ØªØ®Ø¯Ù… Ø§Ù„Ø£Ø¯Ø§Ø©:</h4>
            <ul>
                <li><strong>Ø§Ù„Ø®Ø·ÙˆØ© 1:</strong> Ø§Ø±ÙØ¹ ØµÙˆØ±ØªÙƒ Ø§Ù„Ø´Ø®ØµÙŠØ©</li>
                <li><strong>Ø§Ù„Ø®Ø·ÙˆØ© 2:</strong> Ø§Ø¶Ø¨Ø· Ø­Ø¬Ù… Ø§Ù„ØµÙˆØ±Ø© Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø´Ø±ÙŠØ· Ø§Ù„ØªØ­ÙƒÙ…</li>
                <li><strong>Ø§Ù„Ø®Ø·ÙˆØ© 3:</strong> Ø­Ø±Ùƒ Ø§Ù„ØµÙˆØ±Ø© Ø£ÙÙ‚ÙŠØ§Ù‹ ÙˆØ¹Ù…ÙˆØ¯ÙŠØ§Ù‹ Ù„Ù„ÙˆØµÙˆÙ„ Ù„Ù„Ù…ÙˆØ¶Ø¹ Ø§Ù„Ù…Ø«Ø§Ù„ÙŠ</li>
                <li><strong>Ø§Ù„Ø®Ø·ÙˆØ© 4:</strong> ÙŠÙ…ÙƒÙ†Ùƒ Ø£ÙŠØ¶Ø§Ù‹ ØªØ¯ÙˆÙŠØ± Ø§Ù„ØµÙˆØ±Ø© Ø¥Ø°Ø§ Ù„Ø²Ù… Ø§Ù„Ø£Ù…Ø±</li>
                <li><strong>Ø§Ù„Ø®Ø·ÙˆØ© 5:</strong> Ø´Ø§Ù‡Ø¯ Ø§Ù„Ù†ØªÙŠØ¬Ø© Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ© Ù…Ø¨Ø§Ø´Ø±Ø© ÙˆØ§Ø¶ØºØ· ØªØ­Ù…ÙŠÙ„</li>
                <li><strong>Ù†ØµÙŠØ­Ø©:</strong> ÙŠÙ…ÙƒÙ†Ùƒ Ø³Ø­Ø¨ Ø§Ù„ØµÙˆØ±Ø© Ø¨Ø§Ù„Ù…Ø§ÙˆØ³ Ø£Ùˆ Ø§Ù„Ø¥ØµØ¨Ø¹ Ù„ØªØ­Ø±ÙŠÙƒÙ‡Ø§ Ø¨Ø³Ù‡ÙˆÙ„Ø©</li>
            </ul>
        </div>
    </div>
    <script>
        (function() {
            const allowedDomains = ['mostafaezat-afk.github.io', 'github.io', 'localhost', '127.0.0.1'];
            const currentDomain = window.location.hostname;
            const isAllowed = allowedDomains.some(d => currentDomain.includes(d));
            
            if (!isAllowed && !currentDomain.includes('claude.ai')) {
                document.body.innerHTML = '<div style="text-align:center;padding:50px;"><h1>âš ï¸ ØºÙŠØ± Ù…ØµØ±Ø­</h1><p> ØºÙŠØ± Ø§Ù„Ù…ØµØ±Ø­ Ø¨Ù‡</p></div>';
                throw new Error('Unauthorized domain');
            }
        })();
        const _0x4f2a = ['aHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL21vc3RhZmFlemF0LWFmay9ub25vd3cvbWFpbi82NDJfbi5wbmc='];
        const _0x7b3c = (s) => atob(s);
        const _0x9d1e = () => _0x7b3c(_0x4f2a[0]);
        let _$={u:null,f:null,s:100,x:0,y:0,r:0,d:false,sx:0,sy:0};
        const _e=(i)=>document.getElementById(i);
        const _d={ua:_e('uploadArea'),fi:_e('fileInput'),us:_e('uploadSection'),es:_e('editorSection'),cv:_e('editorCanvas'),ss:_e('scaleSlider'),xs:_e('xSlider'),ys:_e('ySlider'),rs:_e('rotationSlider'),sv:_e('scaleValue'),xv:_e('xValue'),yv:_e('yValue'),rv:_e('rotationValue')};
        const _c=_d.cv.getContext('2d');
        (function(){
            const img=new Image();
            img.crossOrigin='anonymous';
            img.onload=()=>{_$.f=img;};
            img.onerror=()=>console.error('Frame load failed');
            setTimeout(()=>{img.src=_0x9d1e();},100);
        })();
        document.addEventListener('contextmenu',e=>e.preventDefault());
        document.addEventListener('keydown',e=>{
            if(e.key==='F12'||e.ctrlKey&&e.shiftKey&&e.key==='I'||e.ctrlKey&&e.shiftKey&&e.key==='J'||e.ctrlKey&&e.key==='U'){
                e.preventDefault();
                return false;
            }
        });
        (function(){
            const x=()=>{
                if(window.outerWidth-window.innerWidth>160||window.outerHeight-window.innerHeight>160){
                    document.body.innerHTML='<div style="text-align:center;padding:50px;"><h1>âš ï¸ ØªØ­Ø°ÙŠØ±</h1><p>Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥ØºÙ„Ø§Ù‚ Ø£Ø¯ÙˆØ§Øª Ø§Ù„Ù…Ø·ÙˆØ±</p></div>';
                }
            };
            setInterval(x,1000);
        })();
        _d.ua.onclick=()=>_d.fi.click();
        _d.fi.onchange=(e)=>{
            if(e.target.files.length>0){
                const r=new FileReader();
                r.onload=(ev)=>{
                    const img=new Image();
                    img.onload=()=>{
                        _$.u=img;
                        _d.us.style.display='none';
                        _d.es.classList.add('active');
                        _d.cv.width=600;
                        _d.cv.height=600;
                        draw();
                    };
                    img.src=ev.target.result;
                };
                r.readAsDataURL(e.target.files[0]);
            }
        };
        _d.ua.ondragover=(e)=>{e.preventDefault();_d.ua.classList.add('dragover');};
        _d.ua.ondragleave=()=>_d.ua.classList.remove('dragover');
        _d.ua.ondrop=(e)=>{
            e.preventDefault();
            _d.ua.classList.remove('dragover');
            if(e.dataTransfer.files.length>0){
                const r=new FileReader();
                r.onload=(ev)=>{
                    const img=new Image();
                    img.onload=()=>{
                        _$.u=img;
                        _d.us.style.display='none';
                        _d.es.classList.add('active');
                        _d.cv.width=600;
                        _d.cv.height=600;
                        draw();
                    };
                    img.src=ev.target.result;
                };
                r.readAsDataURL(e.dataTransfer.files[0]);
            }
        };
        _d.ss.oninput=(e)=>{_$.s=parseInt(e.target.value);_d.sv.textContent=_$.s+'%';draw();};
        _d.xs.oninput=(e)=>{_$.x=parseInt(e.target.value);_d.xv.textContent=_$.x;draw();};
        _d.ys.oninput=(e)=>{_$.y=parseInt(e.target.value);_d.yv.textContent=_$.y;draw();};
        _d.rs.oninput=(e)=>{_$.r=parseInt(e.target.value);_d.rv.textContent=_$.r+'Â°';draw();};
        const startDrag=(e)=>{_$.d=true;_$.sx=e.offsetX;_$.sy=e.offsetY;};
        const drag=(e)=>{
            if(!_$.d)return;
            const dx=e.offsetX-_$.sx,dy=e.offsetY-_$.sy;
            _$.x+=dx;_$.y+=dy;
            _d.xs.value=_$.x;_d.ys.value=_$.y;
            _d.xv.textContent=_$.x;_d.yv.textContent=_$.y;
            _$.sx=e.offsetX;_$.sy=e.offsetY;
            draw();
        };
        const endDrag=()=>_$.d=false;
        _d.cv.onmousedown=startDrag;
        _d.cv.onmousemove=drag;
        _d.cv.onmouseup=endDrag;
        _d.cv.onmouseleave=endDrag;
        _d.cv.ontouchstart=(e)=>{
            e.preventDefault();
            const t=e.touches[0];
            const m=new MouseEvent('mousedown',{clientX:t.clientX,clientY:t.clientY});
            _d.cv.dispatchEvent(m);
        };
        _d.cv.ontouchmove=(e)=>{
            e.preventDefault();
            const t=e.touches[0];
            const m=new MouseEvent('mousemove',{clientX:t.clientX,clientY:t.clientY});
            _d.cv.dispatchEvent(m);
        };
        _d.cv.ontouchend=(e)=>{
            e.preventDefault();
            _d.cv.dispatchEvent(new MouseEvent('mouseup',{}));
        };
        function draw(){
            if(!_$.u)return;
            _c.clearRect(0,0,_d.cv.width,_d.cv.height);
            const cx=_d.cv.width/2,cy=_d.cv.height/2;
            _c.save();
            _c.translate(cx,cy);
            _c.rotate(_$.r*Math.PI/180);
            _c.translate(-cx,-cy);
            const sf=_$.s/100;
            const sc=Math.max(_d.cv.width/_$.u.width,_d.cv.height/_$.u.height)*sf;
            const w=_$.u.width*sc,h=_$.u.height*sc;
            const ix=cx-w/2+_$.x,iy=cy-h/2+_$.y;
            _c.drawImage(_$.u,ix,iy,w,h);
            _c.restore();
            if(_$.f)_c.drawImage(_$.f,0,0,_d.cv.width,_d.cv.height);
        }
        function downloadImage(){
            const fc=document.createElement('canvas');
            const ctx=fc.getContext('2d');
            const sz=1200;
            fc.width=sz;fc.height=sz;
            const cx=sz/2,cy=sz/2;
            ctx.save();
            ctx.translate(cx,cy);
            ctx.rotate(_$.r*Math.PI/180);
            ctx.translate(-cx,-cy);
            const sf=_$.s/100;
            const sc=Math.max(sz/_$.u.width,sz/_$.u.height)*sf;
            const w=_$.u.width*sc,h=_$.u.height*sc;
            const ix=cx-w/2+(_$.x*2),iy=cy-h/2+(_$.y*2);
            ctx.drawImage(_$.u,ix,iy,w,h);
            ctx.restore();
            if(_$.f)ctx.drawImage(_$.f,0,0,sz,sz);
            const a=document.createElement('a');
            a.download='profile-with-frame.png';
            a.href=fc.toDataURL('image/png');
            a.click();
        }
        async function shareImage(){
            try{
                const fc=document.createElement('canvas');
                const ctx=fc.getContext('2d');
                const sz=1200;
                fc.width=sz;fc.height=sz;
                const cx=sz/2,cy=sz/2;
                ctx.save();
                ctx.translate(cx,cy);
                ctx.rotate(_$.r*Math.PI/180);
                ctx.translate(-cx,-cy);
                const sf=_$.s/100;
                const sc=Math.max(sz/_$.u.width,sz/_$.u.height)*sf;
                const w=_$.u.width*sc,h=_$.u.height*sc;
                const ix=cx-w/2+(_$.x*2),iy=cy-h/2+(_$.y*2);
                ctx.drawImage(_$.u,ix,iy,w,h);
                ctx.restore();
                if(_$.f)ctx.drawImage(_$.f,0,0,sz,sz);
                const blob=await new Promise(r=>fc.toBlob(r,'image/png'));
                const file=new File([blob],'profile-frame.png',{type:'image/png'});
                if(navigator.share&&navigator.canShare({files:[file]})){
                    await navigator.share({files:[file],title:'ØµÙˆØ±Ø© Ø§Ù„Ø¨Ø±ÙˆÙØ§ÙŠÙ„ Ø§Ù„Ø®Ø§ØµØ© Ø¨ÙŠ'});
                }else{
                    downloadImage();
                    alert('ØªÙ… ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙˆØ±Ø©! ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ù„Ø¢Ù† Ù…Ø´Ø§Ø±ÙƒØªÙ‡Ø§');
                }
            }catch(e){downloadImage();}
        }
        function reset(){
            _$.u=null;_$.s=100;_$.x=0;_$.y=0;_$.r=0;
            _d.ss.value=100;_d.xs.value=0;_d.ys.value=0;_d.rs.value=0;
            _d.sv.textContent='100%';_d.xv.textContent='0';_d.yv.textContent='0';_d.rv.textContent='0Â°';
            _d.fi.value='';
            _d.es.classList.remove('active');
            _d.us.style.display='block';
        }
    </script>
</body>
</html>

