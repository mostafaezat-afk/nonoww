<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <title>إعدادات النظام</title>
  <script>
    // استدعاء البيانات من السيرفر
    async function loadSettings() {
      const response = await fetch('?action=getSettings');
      const settings = await response.json();
      document.getElementById('placeName').value = settings['اسم المكان'] || '';
      document.getElementById('shortDesc').value = settings['نبذة مختصرة'] || '';
      // يمكن إضافة المزيد من الحقول هنا حسب الحاجة
    }

    // حفظ إعدادات النظام
    async function saveSettings() {
      const settings = {
        'اسم المكان': document.getElementById('placeName').value,
        'نبذة مختصرة': document.getElementById('shortDesc').value,
      };

      const response = await fetch('', {
        method: 'POST',
        body: new URLSearchParams({
          action: 'saveSettings',
          settingsData: JSON.stringify(settings),
        })
      });

      const result = await response.json();
      alert(result.message || 'تم الحفظ');
    }

    // مثال لحفظ إعدادات طبيب
    async function saveDoctorSettings() {
      const doctorData = {
        oldName: 'اسم الطبيب القديم',
        name: document.getElementById('doctorName').value,
        specialty: document.getElementById('doctorSpecialty').value,
        phone: document.getElementById('doctorPhone').value,
        status: document.getElementById('doctorStatus').value,
        settings: {
          workDays: document.getElementById('workDays').value,
          startHour: document.getElementById('startHour').value,
          endHour: document.getElementById('endHour').value,
          duration: document.getElementById('duration').value,
          breakStart: document.getElementById('breakStart').value,
          breakEnd: document.getElementById('breakEnd').value,
          minBooking: document.getElementById('minBooking').value,
          maxBooking: document.getElementById('maxBooking').value
        }
      };

      const response = await fetch('', {
        method: 'POST',
        body: new URLSearchParams({
          action: 'saveDoctorSettings',
          doctorData: JSON.stringify(doctorData),
        })
      });

      const result = await response.json();
      alert(result.message || 'تم تحديث الطبيب');
    }

    window.onload = loadSettings;
  </script>
</head>
<body>
  <h2>إعدادات النظام</h2>
  <label>اسم المكان:</label><br />
  <input id="placeName" type="text" /><br />

  <label>نبذة مختصرة:</label><br />
  <input id="shortDesc" type="text" /><br />

  <button onclick="saveSettings()">حفظ الإعدادات</button>

  <hr />

  <h2>إعدادات الطبيب</h2>
  <label>اسم الطبيب:</label><br />
  <input id="doctorName" type="text" /><br />
  
  <label>التخصص:</label><br />
  <input id="doctorSpecialty" type="text" /><br />
  
  <label>رقم الهاتف:</label><br />
  <input id="doctorPhone" type="text" /><br />
  
  <label>الحالة:</label><br />
  <input id="doctorStatus" type="text" value="نشط" /><br />
  
  <label>أيام العمل (مثال: 6,0,1,2,3,4):</label><br />
  <input id="workDays" type="text" /><br />
  
  <label>ساعة البداية:</label><br />
  <input id="startHour" type="text" /><br />
  
  <label>ساعة النهاية:</label><br />
  <input id="endHour" type="text" /><br />
  
  <label>مدة الموعد (دقائق):</label><br />
  <input id="duration" type="text" /><br />
  
  <label>فترة الراحة من:</label><br />
  <input id="breakStart" type="text" /><br />
  
  <label>فترة الراحة إلى:</label><br />
  <input id="breakEnd" type="text" /><br />
  
  <label>الحد الأدنى للحجز (دقائق):</label><br />
  <input id="minBooking" type="text" /><br />
  
  <label>الحد الأقصى للحجز (أيام):</label><br />
  <input id="maxBooking" type="text" /><br />
  
  <button onclick="saveDoctorSettings()">حفظ بيانات الطبيب</button>
  
</body>
</html>
